<% remote_form_for(@map, :update => "Edit", :html => {:multipart => true}) do |f| %>
  <div class="column span-12">
    <p>
      <b>Title</b><br />
      <%= f.text_field :title %>
    </p>

    <p>
      <b>Description </b><span class="tiny-text">(max 256 chars)</span><br />
      <%= f.text_area(:description, :rows => 12, :cols => 30) %>
    </p>
    <p>
      <b>Tags </b><span class="tiny-text">(comma separated)</span> <br />
      <%= f.text_field :tag_list %>
    </p>

	<p>
	<%= 
	### ------------------------------------------------------------------------------------------------------------------------ ###
	### BWE UPDATE - added span element
	### ------------------------------------------------------------------------------------------------------------------------ ###
	-%>
	<span>Map Type:&nbsp;</span>	

	<%= 
	### ------------------------------------------------------------------------------------------------------------------------ ###
	### BWE UPDATE - removed original code
	# initial code defaults to :is_map even if another is selected (seems like a little bug)
	### ------------------------------------------------------------------------------------------------------------------------ ###
	# f.select(:map_type, Map.map_type_hash, :selected=>:is_map) 
	-%>

	<%= 
	### ------------------------------------------------------------------------------------------------------------------------ ###
	### BWE UPDATE - altered original code
	# by default f.select uses the DB value (new) or first value (new) to select
	### ------------------------------------------------------------------------------------------------------------------------ ###
	f.select(:map_type, Map.map_type_hash) 
	-%>
	</p>
  </div>

  <div class="column span-12">
     <p>
      <b>Subject Area</b><span class="tiny-text">(optional)</span><br />
      <%= f.text_field :subject_area %>
    </p>


    <p>
      <b>Metadata Unique ID</b><span class="tiny-text">(optional)</span><br />
      <%= f.text_field :unique_id %>
    </p>
    
     <p>
      <b>Source / Bibliographic Ref URL</b><span class="tiny-text">(optional)</span><br />
      <%= f.text_field :source_uri %>
    </p>
    
     <p>
      <b>Call Number</b><span class="tiny-text">(optional)</span><br />
      <%= f.text_field :call_number %>
     </p>

    <p>
      <b>Publisher</b><span class="tiny-text">(optional)</span><br />
      <%= f.text_field :publisher %>
    </p>
    
    <p>
      <b>Place of Publication</b><span class="tiny-text">(optional)</span><br />
      <%= f.text_field :publication_place %>
    </p>
    <p>
      <b>Author(s)</b><span class="tiny-text">(optional)</span><br />
      <%= f.text_field :authors %>
    </p>

     <p>
      <b>Date Depicted</b><span class="tiny-text">(year, optional)</span><br />
      <%= f.text_field :date_depicted %>
     </p>

    <p>
      <b>Published Date</b><span class="tiny-text">(optional)</span><br />
      <%= f.date_select(:published_date, :include_blank => true, :order => [:day, :month, :year ], :start_year => 1600, :end_year =>Time.now.year)  %>
    </p>

    <p>
      <b>Reprint Date </b><span class="tiny-text">(optional)</span><br />
      <%= f.date_select(:reprint_date, :include_blank => true, :order => [:day, :month, :year ], :start_year => 1600, :end_year =>Time.now.year)  %>
    </p>
    
    <p>
      <b>Scale</b><span class="tiny-text">(optional)</span><br />
      <%= f.text_field :scale %>
    </p>

     <p>
      <b>Metadata Projection</b><span class="tiny-text">(optional)</span><br />
      <%= f.text_field :metadata_projection %>
    </p>
    <p>
      <b>Metadata Location</b><span class="tiny-text">(optional)</span><br />
      <b>Lat: </b> <%= f.text_field :metadata_lat %><br />
      <b>Lon: </b> <%= f.text_field :metadata_lon %>
    </p>

  </div>



<%= 
### ------------------------------------------------------------------------------------------------------------------------ ###
### BWE UPDATE - added new div for nepa data (type, link, document number, etc.)
### ------------------------------------------------------------------------------------------------------------------------ ###
-%>
<div class="column span-12 last">
	<p><span>NEPA</span></p>

	<p><span>NEPA Map Type:&nbsp;</span><%= f.select(:map_type_nepa, Map.map_type_nepa_hash) -%> </p>

	<p><span>NEPA Map Link:&nbsp;</span><%= f.text_field :map_link_nepa %></p>

	<% if @map.project_map? -%>
		<% if !@map.nepa_document.nil? -%>

			<% 
#f.fields_for @map.nepa_document, index: @map.nepa_document.id do |nd_form|
f.fields_for :nepa_document do |nd_form|  
%>

<%= nd_form.text_field :document_no %>

			<% end %>


		<% end %>
	<% end %>


</div>



  <div class="column span-24">
    <%- if defined?(page)  && page =~ /new/ -%>
      <p>
        <label for="upload"><b>Upload An Image File:</b>
          <br /><% if @max_size %>
            Max size:
            <%=  number_to_human_size @max_size %>.
          <% end %>
          <%= @upload_file_message %>
        </label> <br />
        <%= f.file_field :upload %>
      </p>
    <%- end -%>

<%- if defined?(page)  && (page =~ /edit/ && logged_in? && (current_user == @map.owner || current_user.has_role?("editor")) || page =~ /new/ ) -%>
<p>
Map visibility. <br /><%= f.radio_button :public, "true" %><label for="map_public_true">Public(default)</label> <br/>
<%= f.radio_button :public, "false" %><label for="map_public_false">Don't list the map (only you can see it)</label>
</p>
<%- end -%>
    <p>
      <%= f.submit((defined?(page) && page =~ /new/) ? "Create" : "Update" )%>
    </p>
    
  </div>
<% end %>
